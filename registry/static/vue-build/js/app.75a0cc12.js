(function(){"use strict";var e={344:function(e,t,a){var s=a(144),i=function(){var e=this,t=e._self._c;return t("router-view")},r=[],n={name:"App"},o=n,l=a(1001),d=(0,l.Z)(o,i,r,!1,null,null,null),c=d.exports,h=a(8345),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"layout"},[t("Nav"),t("hr",{staticClass:"separator-light"}),t("main",[t("div",{staticClass:"layout__content dashboard-page"},[t("TopStats"),t("div",{staticClass:"grid grid--one-column"},[t("Tabs")],1),t("div",{class:"publishers"!==e.$route.name&&"grid grid--one-column"},[t("router-view")],1)],1)]),t("Footer")],1)},g=[],p=function(){var e=this;e._self._c;return e._m(0)},b=[function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"top-bar"},[t("nav",{staticClass:"top-bar__menu contextual-menu"},[t("ul",[t("li",{staticClass:"contextual-menu__item"},[t("a",{staticClass:"contextual-menu__button",attrs:{href:"https://grantnav.threesixtygiving.org/",title:"GrantNav"}},[e._v("GrantNav")])]),t("li",{staticClass:"contextual-menu__item"},[t("a",{staticClass:"contextual-menu__button",attrs:{href:"https://insights.threesixtygiving.org/",title:"Insights"}},[e._v("Insights")])]),t("li",{staticClass:"contextual-menu__item"},[t("a",{staticClass:"contextual-menu__button",attrs:{href:"https://threesixtygiving.org/about/",title:"About 360Giving"}},[e._v("About 360Giving")])]),t("li",{staticClass:"contextual-menu__item"},[t("a",{staticClass:"contextual-menu__button",attrs:{href:"https://www.threesixtygiving.org/why-publish/",title:"Why Publish"}},[e._v("Why Publish?")])]),t("li",{staticClass:"contextual-menu__item"},[t("a",{staticClass:"contextual-menu__button",attrs:{href:"https://www.threesixtygiving.org/technical-users/",title:"Technical Users"}},[e._v("Technical Users")])])])])]),t("div",{staticClass:"nav-bar nav-bar--minimal"},[t("a",{staticClass:"nav-bar__home-button",attrs:{href:"/"}},[t("img",{staticStyle:{width:"unset",height:"94px"},attrs:{src:a(9819),alt:"360DataQualityDashboard"}})]),t("nav",{staticClass:"nav-bar__nav-menu"},[t("ul",[t("li",{staticClass:"nav-menu__item"},[e._v(" Based on data published by UK grantmakers in the 360Giving Data Standard ")])])])])])}],f={name:"Nav"},m=f,v=(0,l.Z)(m,p,b,!1,null,null,null),_=v.exports,w=function(){var e=this,t=e._self._c;return e.stats?t("div",{staticClass:"cards-section"},[e.dataDownloaded?t("section",{key:`ready-${e.dataDownloaded}`,staticClass:"grid grid--three-columns"},[t("div",{staticClass:"base-card base-card--teal grid__1"},[t("div",{staticClass:"base-card__content"},[e.dataDownloaded?t("h2",{staticClass:"base-card__title"},[e._v(e._s(e.stats.publishers.toLocaleString()))]):e._e(),t("p",{staticClass:"base-card__text"},[e._v("Publishers")])])]),t("div",{staticClass:"base-card base-card--black grid__1"},[t("div",{staticClass:"base-card__content"},[e.dataDownloaded?t("h2",{staticClass:"base-card__title"},[e._v(e._s(e.stats.funders.toLocaleString()))]):e._e(),t("p",{staticClass:"base-card__text"},[e._v("Funders")])])]),t("div",{staticClass:"base-card base-card--yellow grid__1"},[t("div",{staticClass:"base-card__content"},[e.dataDownloaded?t("h2",{staticClass:"base-card__title"},[e._v(e._s(e.stats.grants.toLocaleString()))]):e._e(),t("p",{staticClass:"base-card__text"},[e._v("Grants")])])]),t("div",{staticClass:"base-card base-card--orange grid__1"},[t("div",{staticClass:"base-card__content"},[e.dataDownloaded?t("h2",{staticClass:"base-card__title"},[e._v(e._s(e.stats.recipientOrganisations.toLocaleString()))]):e._e(),t("p",{staticClass:"base-card__text"},[e._v("Recipient Org IDs")])])]),t("div",{staticClass:"base-card base-card--orange grid__1"},[t("div",{staticClass:"base-card__content"},[e.dataDownloaded?t("h2",{staticClass:"base-card__title"},[e._v(e._s(e.stats.recipientIndividuals.toLocaleString()))]):e._e(),t("p",{staticClass:"base-card__text"},[e._v("Recipient Individuals")])])]),t("div",{staticClass:"base-card base-card--red grid__1"},[t("div",{staticClass:"base-card__content"},[e.dataDownloaded?t("h2",{staticClass:"base-card__title"},[e._v("£"+e._s(e._f("numeral")(e.stats.GBP,"0.00a")))]):e._e(),t("p",{staticClass:"base-card__text"},[e._v("Total amount")])])])]):t("section",{staticClass:"grid grid--one-column"},[t("Spinner")],1)]):e._e()},y=[],C=function(){var e=this;e._self._c;return e._m(0)},x=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")])}],k={name:"Spinner"},D=k,M=(0,l.Z)(D,C,x,!1,null,null,null),T=M.exports,S={name:"TopStats",components:{Spinner:T},data(){return{stats:{grants:null,recipients:null,GBP:null},dataDownloaded:!1}},methods:{getData(){this.dataDownloaded=!1;const e="publisher"===this.$router.currentRoute.name?`/publisher/${this.$router.currentRoute.params.id}`:"/overview?mode=publishers";fetch(`https://store.data.threesixtygiving.org/api/dashboard/${e}`).then((e=>e.json())).then((e=>{this.stats=e.aggregate.total,this.dataDownloaded=!0})).catch((e=>{console.error("Error:",e),this.dataDownloaded=!0,this.stats=null}))}},created(){this.getData()}},I=S,R=(0,l.Z)(I,w,y,!1,null,null,null),N=R.exports,G=function(){var e=this;e._self._c;return e._m(0)},P=[function(){var e=this,t=e._self._c;return t("footer",{staticClass:"layout__footer"},[t("div",{staticClass:"subscribe-section"},[t("div",{staticClass:"subscribe-section__wrapper"},[t("form",{staticClass:"subscribe-section__form",attrs:{action:"#"}},[t("label",{staticClass:"screen-reader-only",attrs:{for:"subscribe"}},[e._v("Subscribe")]),t("input",{attrs:{type:"email",id:"subscribe",placeholder:"Subscribe to our newsletter"}}),t("input",{attrs:{type:"submit",value:"Send"}})])])]),t("footer",{staticClass:"footer"},[t("div",{staticClass:"footer__row wrapper"},[t("div",{staticClass:"footer__column-2 footer__branding"},[t("div",{staticClass:"footer__logo"},[t("img",{attrs:{src:a(5813),alt:"360Giving"}})]),t("p",{staticClass:"footer__tagline"},[e._v("Open data for more effective grantmaking")])]),t("div",{staticClass:"footer__column-1 footer__social"},[t("a",{staticClass:"github-icon",attrs:{href:"https://github.com/ThreeSixtyGiving/insights-ng"}},[t("img",{attrs:{src:a(6936),alt:"Check our Github"}})]),t("a",{staticClass:"twitter-icon",attrs:{href:"https://twitter.com/360Giving/"}},[t("img",{attrs:{src:a(2707),alt:"Follow us on Twitter"}})])])]),t("div",{staticClass:"footer__row wrapper"},[t("div",{staticClass:"footer__column-2 footer__section medium-up"},[t("h3",{staticClass:"footer__heading"},[e._v("Links")]),t("ul",[t("li",[t("a",{attrs:{href:"/"}},[e._v("Home")])]),t("li",[t("a",{attrs:{href:"https://threesixtygiving.org/about"}},[e._v("About")])]),t("li",[t("a",{attrs:{href:"https://threesixtygiving.org/"}},[e._v("360Giving")])])])]),t("div",{staticClass:"footer__column-2 footer__section medium-up"},[t("h3",{staticClass:"footer__heading"},[e._v("Other Products")]),t("ul",[t("li",[t("a",{attrs:{href:"https://grantnav.threesixtygiving.org/"}},[e._v("GrantNav")])]),t("li",[t("a",{attrs:{href:"https://insights.threesixtygiving.org/"}},[e._v("Insights")])]),t("li",[t("a",{attrs:{href:"https://standard.threesixtygiving.org/"}},[e._v("Data Standard")])]),t("li",[t("a",{attrs:{href:"https://dataquality.threesixtygiving.org/"}},[e._v("Data Quality Tool")])])])]),t("div",{staticClass:"footer__column-3 footer__section"},[t("h3",{staticClass:"footer__heading"},[e._v("Quality Dashboard")]),t("p",[e._v("A dashboard showing the data quality of 360Giving data as a whole and for each individual publisher. It provides insights into the key features that make the data useful for analysis to help publishers to identify opportunities for their data to be improved. ")])]),t("div",{staticClass:"footer__column-3 footer__section"},[t("h3",{staticClass:"footer__heading"},[e._v("360Giving")]),t("p",[e._v("We help organisations openly publish grants data, and help people use it to improve charitable giving.")]),t("p",[t("a",{attrs:{href:"https://threesixtygiving.org"}},[e._v("Find out more about 360Giving")]),e._v(".")])])]),t("div",{staticClass:"footer__row wrapper footer__small-print"},[t("div",{staticClass:"footer__column-2"},[t("p",[e._v("© Copyright 2021 360Giving."),t("br"),e._v("Licensed under a "),t("a",{attrs:{href:"https://creativecommons.org/licenses/by/4.0/",target:"_blank"}},[e._v("Creative Commons Attribution 4.0 International License")]),e._v(".")])]),t("div",{staticClass:"footer__column-2 footer__policy-links hide-print"},[t("p",[t("a",{attrs:{href:"https://www.threesixtygiving.org/privacy/"}},[e._v("Privacy Notice")]),e._v(" | "),t("a",{attrs:{href:"https://www.threesixtygiving.org/terms-conditions/"}},[e._v("Terms & Conditions")]),e._v(" | "),t("a",{attrs:{href:"https://www.threesixtygiving.org/cookie-policy/"}},[e._v("Cookie Policy")]),e._v(" | "),t("a",{attrs:{href:"https://www.threesixtygiving.org/take-down-policy/"}},[e._v("Take Down Policy")]),e._v(" | "),t("a",{attrs:{href:"https://www.threesixtygiving.org/about/360giving-code-conduct/"}},[e._v("Code of Conduct")])])])])])])}],$={name:"Footer"},L=$,O=(0,l.Z)(L,G,P,!1,null,null,null),q=O.exports,F=function(){var e=this,t=e._self._c;return t("div",["publisher"!==e.$router.currentRoute.name?t("div",{staticClass:"tabs"},[t("span",{class:"tab tab"+("overview"===e.$router.currentRoute.name?"--active":"--inactive")},[t("a",{staticClass:"tab__inner",attrs:{href:"/alldata"}},[e._v("All Data")])]),t("span",{class:"tab tab"+("publishers"===e.$router.currentRoute.name?"--active":"--inactive")},[t("a",{staticClass:"tab__inner",attrs:{href:"/publishers"}},[e._v("Publishers")])]),t("span",{staticClass:"tabs-empty-bar"})]):e._e(),"publisher"===e.$router.currentRoute.name?t("div",[t("a",{staticClass:"dashboard-page__back-link",attrs:{href:"/publishers"}},[t("MaterialIcon",{attrs:{iconName:"arrow_back"}}),e._v(" Back to All Publishers ")],1)]):e._e()])},B=[],j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"icon",style:""+("orange"===e.color?"--icon-color: var(--color-orange)":"")},[e.overlaidText?t("span",{staticClass:"icon__overlaid-text"},[e._v(e._s(e.overlaidText))]):t("i",{staticClass:"material-icons icon__mat-icon"},[e._v(e._s(e.iconName))])])},Z=[],E={name:"MaterialIcon",props:{overlaidText:null,iconName:null,color:null}},A=E,U=(0,l.Z)(A,j,Z,!1,null,null,null),Y=U.exports,H={name:"Tabs",components:{MaterialIcon:Y}},z=H,K=(0,l.Z)(z,F,B,!1,null,null,null),W=K.exports,Q={name:"HomePage",components:{Nav:_,TopStats:N,Footer:q,Tabs:W}},V=Q,J=(0,l.Z)(V,u,g,!1,null,"0ede46ce",null),X=J.exports,ee=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"dashboard-page__section-radios"},[t("RadioButtons",{attrs:{overviewMode:e.overviewMode},on:{setOverviewMode:function(t){return e.setOverviewMode(t)}}})],1),t("div",{staticClass:"spacer-2 clearfix"}),e.dataDownloaded?e._e():t("div",[t("Spinner",{key:e.dataDownloaded})],1),e.dataDownloaded?t("div",[e._l(e.cards,(function(a,s){return t("DashboardCard",{key:`card-${s}`,attrs:{overviewMode:e.overviewMode,cardData:a},on:{showModalEvent:function(t){return e.controlModal(!0,t)}}})})),e.modalState?t("Modal",{key:this.modalRef,attrs:{cardData:this.cards.find((t=>t.modalRef===e.modalRef))},on:{hideModalEvent:function(t){return e.controlModal(!1)}}}):e._e()],2):e._e(),t("div",{staticClass:"spacer-2 clearfix"})])},te=[],ae=function(){var e=this,t=e._self._c;return t("div",{class:"dashboard-stats-card "+("grants"===e.overviewMode?"dashboard-stats-card--grant":"")},[t("div",{staticClass:"dashboard-stats-card__head"},[t("div",{staticClass:"dashboard-stats-card__left-side"},[t("h3",{staticClass:"dashboard-stats-card__title"},[e._v(e._s(e.cardData.title))]),t("p",{staticClass:"dashboard-stats-card__description"},[e._v(e._s(e.cardData.description))])]),e.cardData.infoLabel?t("div",{staticClass:"dashboard-stats-card__right-side"},[t("AlertTag",e._g({attrs:{label:e.cardData.infoLabel,modalRef:e.cardData.modalRef}},e.$listeners))],1):e._e()]),t("div",{staticClass:"dashboard-stats-card__groups"},e._l(e.cardData.stats,(function(a,s){return t("div",{key:s,staticClass:"dashboard-stats-card__group"},[t("MaterialIcon",{attrs:{iconName:a.iconName,color:"publishers"===e.overviewMode?"teal":"orange"}}),t("span",{attrs:{id:`stat-${s}`}},[e._v(e._s(a.label))]),t("span",{staticClass:"dashboard-stats-card__value",attrs:{"aria-labelledby":`stat-${s}`}},[e._v(e._s(a.value))])],1)})),0),t("div",{staticClass:"spacer-2"}),e.cardData.graph?t("div",[t("hr",{staticClass:"separator-light"}),t("Plotly",{attrs:{data:e.cardData.graph.data,layout:e.cardData.graph.layout,displaylogo:!1,modeBarButtonsToRemove:["zoom2d","select2d","pan2d","lasso2d","autoScale2d","toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"],toImageButtonOptions:{filename:"360Giving-"+e.cardData.title}}})],1):e._e()])},se=[],ie=function(){var e=this,t=e._self._c;return t("a",{staticClass:"alert-tag alert-tag--anchor",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showModal(e.modalRef)}}},[e._m(0),t("span",{staticClass:"alert-tag__content"},[e._v(e._s(e.label))])])},re=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"alert-tag__icon"},[t("img",{staticStyle:{"vertical-align":"top"},attrs:{src:a(9519),alt:""}})])}],ne={name:"AlertTag",props:{modalRef:{type:String,default:""},label:{type:String,default:""}},methods:{showModal(){this.$emit("showModalEvent",this.modalRef)}}},oe=ne,le=(0,l.Z)(oe,ie,re,!1,null,null,null),de=le.exports,ce=a(8343),he={name:"DashboardCard",components:{AlertTag:de,MaterialIcon:Y,Plotly:ce.Plotly},props:{overviewMode:String,cardData:{title:"",description:"",infoLabel:"",stats:[{label:"",values:"",iconName:""}]}}},ue=he,ge=(0,l.Z)(ue,ae,se,!1,null,null,null),pe=ge.exports,be=function(){var e=this,t=e._self._c;return t("div",[t("button",{staticClass:"button button--teal",staticStyle:{"margin-right":"5px"},style:e.activePublishersStyle,on:{click:function(t){return e.setOverviewMode("publishers")}}},[e._v("By Publisher")]),t("button",{staticClass:"button button--orange",style:e.activeGrantsStyle,on:{click:function(t){return e.setOverviewMode("grants")}}},[e._v("By Grant")])])},fe=[],me={name:"RadioButtons",data:function(){return{radioOptions:[{name:"Publishers",value:"publishers",default:!0},{name:"Grants",value:"grants"}]}},computed:{activeGrantsStyle:function(){return"grants"===this.overviewMode?{"background-color":"var(--color-orange)",color:"var(--colors-white)","border-color":"var(--color-orange)"}:{}},activePublishersStyle:function(){return"publishers"===this.overviewMode?{"background-color":"var(--color-teal)",color:"var(--colors-white)","border-color":"var(--color-teal)"}:{}}},props:{overviewMode:String},methods:{setOverviewMode(e){this.$emit("setOverviewMode",e)}}},ve=me,_e=(0,l.Z)(ve,be,fe,!1,null,null,null),we=_e.exports,ye=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal modal--shown dashboard-modal",attrs:{id:"modal-00",role:"dialog","aria-labelledby":"modal-heading",tabindex:"-1"}},[t("div",{staticClass:"modal__overlay modal__trigger",attrs:{"data-id":"modal-00"},on:{click:e.hideModal}}),t("div",{staticClass:"modal__window"},[t("button",{staticClass:"modal__close modal__trigger",attrs:{"data-id":"modal-00"},on:{click:e.hideModal}}),t("div",{staticClass:"modal__content"},[t("h3",{attrs:{id:"modal-heading"}},[e._v(e._s(e.cardData.infoLabel))]),e.cardData.modalDescription?e._e():t("p",[e._v(e._s(e.cardData.description))]),t("p",{attrs:{else:""},domProps:{innerHTML:e._s(e.cardData.modalDescription)}}),t("hr",{staticClass:"separator-light"}),e._l(e.cardData.stats,(function(a){return t("div",{key:a.iconName},[t("div",{staticClass:"dashboard-modal__groups"},[t("div",{staticClass:"dashboard-modal__group"},[t("div",{staticClass:"dashboard-modal__stat"},[t("span",[t("MaterialIcon",{attrs:{iconName:a.iconName}})],1),t("span",[e._v(e._s(a.label))]),t("span",{staticClass:"dashboard-modal__stat-value-placeholder"},[e._v(e._s(a.value))])])]),t("div",{staticClass:"dashboard-modal__group"},[t("h4",{staticClass:"dashboard-modal__subtitle"},[e._v("This means")]),t("p",{domProps:{innerHTML:e._s(a.modalMeaning)}}),t("h4",{staticClass:"dashboard-modal__subtitle"},[e._v("This is useful because")]),t("p",{domProps:{innerHTML:e._s(a.modalReason)}})])]),t("hr",{staticClass:"separator-light"})])}))],2)])])},Ce=[],xe={name:"Modal",components:{MaterialIcon:Y},methods:{hideModal(){this.$emit("hideModalEvent")}},props:{modalState:String,cardData:{}}},ke=xe,De=(0,l.Z)(ke,ye,Ce,!1,null,null,null),Me=De.exports;const Te="#df6c26",Se="#4eacb7",Ie={CHC:"Registered Charity (E&W)",SC:"Registered Charity (Scotland)",NIC:"Registered Charity (NI)",COH:"Registered Company",GOR:"Government",MPR:"Mutual",NHS:"NHS",UKPRN:"School/University/Education (UKPRN)",EDU:"School/University/Education (DFE)",SHPE:"Social Housing Provider",LAE:"Local Authority (E)",LAS:"Local Authority (Scotland)",REV:"Registered Charity (HMRC)",EIN:"US registered with IRS"},Re=e=>{const{quality:t,aggregate:a}=e;return[{title:"Location data",description:"Location data helps users to understand where grants go. Location names help people using the data, while location codes enable grant data to be visualised in maps and to be linked to official statistics.\n",modalDescription:"360Giving data has a range of fields for describing location which are split into two main types; recipient and grant (known as beneficiary) location. <br /><br /><i>These statistics show the percentage of organisations sharing 360Giving data (known as publishers) that include this information in their grants data.</i>",infoLabel:"Learn more about location data",modalRef:"location_data",stats:[{iconName:"person_pin_circle",label:"Includes recipient location codes",value:`${t.hasRecipientOrgLocations}%`,modalMeaning:'Postcodes or <a href="https://en.wikipedia.org/wiki/ONS_coding_system">ONS geocodes</a> for region, local authority, ward or super output area have been included which show where the recipient is located.',modalReason:'Geocodes (including postcodes) provide a consistent way to describe a location. They can be used to produce maps showing the geographical distribution of funding and allow grants data to be looked at alongside official statistics, such as the <a href="https://en.wikipedia.org/wiki/Multiple_deprivation_index">Indices of multiple deprivation</a>.<br /> 360Giving data that includes recipient postcodes or geocodes works with the <a href="https://help.grantnav.threesixtygiving.org/en/latest/locations.html">location filtering functions of GrantNav</a>.'},{iconName:"edit_location",label:"Includes grant location names",value:`${t.hasBeneficiaryLocationName}%`,modalMeaning:"Place names have been included which describe where the funded work is being delivered or the people who access the service or activity are based. <br /> This could be any type of location: an estate, ward, town or city, local government area or parliamentary constituency, region or country, whichever is relevant for the grant.",modalReason:"Grant location names allow users to understand which places funding is reaching. This data can be more accurate in showing where grants are going geographically, especially in cases where the recipient location is in a different place from the activity being funded."},{iconName:"add_location",label:"Includes grant location codes",value:`${t.hasBeneficiaryLocationGeoCode}%`,modalMeaning:'Postcodes or <a href="https://en.wikipedia.org/wiki/ONS_coding_system">ONS</a> geocodes for region, local authority, ward or super output area have been included which shows where the funded work is being delivered or the people who access the service or activity are based.',modalReason:"Including geocodes that correspond with the grant location names increases the usability of the data by providing a consistent way to identify these places. They can be used to produce maps showing the geographical distribution of funding and allow grants data to be looked at alongside official statistics."}]},{title:"Organisation identifiers",description:"Org IDs help users to understand who is involved in each grant. External org IDs make it possible to see when funders give grants to the same recipient and allow grants data to be linked to official sources of organisation data.",modalDescription:"360Giving data identifies recipient and funding organisations in two main ways - by name and with a unique organisation identifier. These org IDs often use an official reference, such as a charity or company number or school number. <br /><br /><i>These statistics show the percentage of organisations sharing 360Giving data (known as publishers) that include this information in their grants data.</i>",infoLabel:"Learn more about org IDs",modalRef:"org_ids",stats:[{iconName:"tag",label:"Includes charity or company no. fields",value:`${t.hasRecipientOrgCompanyOrCharityNumber}%`,modalMeaning:"Separate fields for sharing the registered charity and/or company numbers for recipient organisations have been included in the data.",modalReason:"Company and charity numbers are important for understanding grantmaking in the UK and including these separately makes it easier for users to match grants data with official sources of information about the recipients."},{iconName:"confirmation_number",label:"Includes external org IDs for over half of recipients",value:`${t.has50pcExternalOrgId}%`,modalMeaning:"More than half of recipients are identified using an external reference, such as a registered charity or company number.",modalReason:"Including an external reference makes it possible to see when they have received grants from multiple funders. It allows grant data to be linked or combined with information taken from official registers. <br /><br/>Some organisations, such as small unregistered groups, do not have an official registration number that can be used to create an org ID. This means a lower percentage of external org IDs in 360Giving data could be because of the type of recipients being funded."}],graph:{data:[{x:Object.keys(a.recipientsExternalOrgId),y:Object.values(a.recipientsExternalOrgId),type:"bar",marker:{color:Se}}],layout:{title:"Use of external recipient org IDs",xaxis:{type:"category",title:"Percentage of Publishers"},yaxis:{title:"Percentage of recipients with external org IDs"}}}},{title:"Grant data",description:"All 360Giving data includes information about award amounts, award dates and the purpose of each grant. Information about the grant duration, grant programme names and classifications help users to understand more context for each grant.",modalDescription:"360Giving data has 10 core fields which provide information about the who, what, when and how much of each grant. Further information can be provided in fields which provide useful context which allows the grantmaking to be understood better. <br /><i>These statistics show the percentage of organisations sharing 360Giving data (known as publishers) that include this information in their grants data.</i>",infoLabel:"Learn more about grant data",modalRef:"grant_data",stats:[{iconName:"event_note",label:"Includes grant duration",value:`${t.hasGrantDuration}%`,modalMeaning:"Planned start and end date, and/or grant duration have been included in the data which show the duration of the project or funding.",modalReason:"Including data that shows the duration of a grant makes it possible to distinguish between short and longer term funding and can be used to see if a grant is currently active or closed.<br /><br />            This information allows users to take into account the phasing of grants when looking at data and better understand patterns of funding."},{iconName:"format_quote",label:"Includes programme names",value:`${t.hasGrantProgrammeTitle}%`,modalMeaning:"Grant programme names have been included in the data which show which grants were awarded under different programmes.",modalReason:"Grant programme names help users to understand a funder’s different types of funding and priorities, and see how their grants vary across and within these. This information is especially useful when it refers to the communities, sectors, issues or places that are the focus of the programme. <br /><br />360Giving data that includes grant programme names works with the grant programme filtering functions of GrantNav and 360Insights."},{iconName:"label",label:"Includes classifications",value:`${t.hasGrantClassification}%`,modalMeaning:"Classification information has been included in the data to show how the grants have been categorised by the funder. These can be about a wide range of things related to the grant or recipient, and are likely to be specific to each funder.",modalReason:"Classifications provide a clear indication of how the data is categorised by the funder, making it easier to understand the data thematically.<br /><br />For funders who don’t have grant programmes, classifications can be used as an alternative way to show their different types of funding and priorities."}]},{title:"Data updates",description:"Timely updates provide users with an up-to-date picture of grantmaking. Publishers make updates at different frequencies; annual, biannual, quarterly, monthly or some publish in real-time.",modalDescription:"360Giving data is published by funding organisations on their own websites. <br /><br />These organisations have different grantmaking cycles, data systems and capacity, which means the frequency at which they update their 360Giving data can range from real-time, monthly, quarterly, biannual or annual. This variation in update schedules has an impact on how recently awarded the published grants will be.<br/><br/><i>These statistics show the percentage of organisations sharing 360Giving data (known as publishers) within a certain time-frame.</i>",infoLabel:"Learn more about data updates",modalRef:"data_updates",stats:[{iconName:"event_available",label:"Have published in the last year",value:`${a.publishedThisYear}%`,modalMeaning:"The organisation has published 360Giving data within the last 12 months.",modalReason:"It is good practise to make updates to add new grants on at least an annual basis to ensure the data is relevant for informing the decision-making of users."},{iconName:"date_range",label:"Have published in the last 3 months",value:`${a.publishedLastThreeMonths}%`,modalMeaning:"The organisation has published 360Giving data within the last three months.",modalReason:"When 360Giving data is up-to-date it allows users to understand current funding decisions and activity, which allows for better planning and coordination."}],graph:{data:[{x:Object.keys(a.awardYears),y:Object.values(a.awardYears),type:"bar",marker:{color:Se}}],layout:{title:"Publication of grants awarded in the past 10 years",yaxis:{title:"Number of publishers"},xaxis:{title:"Year",type:"category"}}}}]},Ne=e=>{const{quality:t,aggregate:a}=e;return[{title:"Location data",description:"Location data helps users to understand where grants go. Location names help people using the data, while location codes enable grant data to be visualised in maps and to be linked to official statistics.",infoLabel:"Learn more about location data",modalDescription:"360Giving data has a range of fields for describing location which are split into two types; recipient and grant (known as beneficiary) location.<br /><br /><i>These statistics show the percentage of grant records that include this information.</i>",modalRef:"location_data",stats:[{iconName:"person_pin_circle",label:"Includes recipient locations codes",value:`${t.hasRecipientOrgLocations}%`,modalMeaning:'The grants include postcodes or <a href="https://en.wikipedia.org/wiki/ONS_coding_system">ONS geocodes</a> for region, local authority, ward or super output area which show where the recipient is located.',modalReason:'Geocodes (including postcodes) provide a consistent way to describe a location. They can be used to produce maps showing the geographical distribution of funding and allow grants data to be looked at alongside official statistics, such as the <a href="https://en.wikipedia.org/wiki/Multiple_deprivation_index">Indices of multiple deprivation</a>.<br/<br/>360Giving data that includes recipient postcodes or geocodes works with the <a href="https://help.grantnav.threesixtygiving.org/en/latest/locations.html">location filtering functions of GrantNav</a>.'},{iconName:"edit_location",label:"Includes grant location names",value:`${t.hasBeneficiaryLocationName}%`,modalMeaning:"The grants include place names which describe where the funded work is being delivered or the people who access the service or activity are based. <br /> This could be any type of location: an estate, ward, town or city, local government area or parliamentary constituency, region or country, whichever is relevant for the grant.",modalReason:"Grant location names allow users to understand which places funding is reaching. This data can be more accurate in showing where grants are going geographically, especially in cases where the recipient location is in a different place from the activity being funded."},{iconName:"add_location",label:"Includes grant location codes",value:`${t.hasBeneficiaryLocationGeoCode}%`,modalMeaning:'The grants include postcodes or <a href="https://en.wikipedia.org/wiki/ONS_coding_system">ONS geocodes</a> for region, local authority, ward or super output area which shows where the funded work is being delivered or the people who access the service or activity are based.',modalReason:"Including geocodes that correspond with the grant location names increases the usability of the data by providing a consistent way to identify these places. They can be used to produce maps showing the geographical distribution of funding and allow grants data to be looked at alongside official statistics."}]},{title:"Organisation identifiers",description:"Org IDs help users to understand who is involved in each grant. External org IDs make it possible to see when funders give grants to the same recipient and allow grants data to be linked to official sources of organisation data.",infoLabel:"Learn more about org IDs",modalDescription:"360Giving data identifies recipient and funding organisations in two main ways - by name and with a unique organisation identifier. These org IDs often use an official reference, such as a charity or company number or school number. <br /><br /><i>These statistics show the percentage of grant records that include this information</i>.",modalRef:"org_ids",stats:[{iconName:"tag",label:"Includes at least one charity or company no.",value:`${t.hasRecipientOrgCompanyOrCharityNumber}%`,modalMeaning:"The grants include registered charity and/or company numbers for recipient organisations. ",modalReason:"Company and charity numbers are important for understanding grantmaking in the UK and including these separately makes it easier for users to match grants data with official sources of information about the recipients. "},{iconName:"confirmation_number",label:"Use external org IDs",value:`${t.has50pcExternalOrgId}%`,modalMeaning:"The grants have a recipient identified using an external reference, such as a registered charity or company number.",modalReason:"Including an external reference makes it possible to see when they have received grants from multiple funders. It allows grant data to be linked or combined with information taken from official registers.<br /><br />Some organisations, such as small unregistered groups, do not have an official registration number that can be used to create org ID. This means a lower percentage of external org IDs in 360Giving data could be because of the type of recipients being funded."}],graph:{data:[{x:Object.keys(a.orgIdTypes).slice(0,7).map((e=>Ie[e])),y:Object.values(a.orgIdTypes).slice(0,6),type:"bar",marker:{color:Te}}],layout:{title:"Main types of external org IDs used",xaxis:{type:"category",title:"Type of org ID",automargin:!0},yaxis:{title:"Number of grants"}}}},{title:"Grant data",description:"All 360Giving data includes information about award amounts, award dates and the purpose of each grant. Information about the grant duration, grant programme names and classifications help users to understand more context for each grant.",infoLabel:"Learn more about grant data",modalDescription:"360Giving data has 10 core fields which provide information about the who, what, when and how much of each grant. Further information can be provided in fields which provide useful context which allows the grantmaking to be understood better.<br /><br /><i>These statistics show the percentage of grant records that include this information.</i>",modalRef:"grant_data",stats:[{iconName:"event_note",label:"Includes grant duration",value:`${t.hasGrantDuration}%`,modalMeaning:"The grants include planned start and end date, and/or grant duration which show the duration of the project or funding.",modalReason:"Including data that shows the duration of a grant makes it possible to distinguish between short and longer term funding and can be used to see if a grant is currently active or closed.<br /><br />This information allows users to take into account the phasing of grants when looking at data and better understand patterns of funding."},{iconName:"format_quote",label:"Includes programme names",value:`${t.hasGrantProgrammeTitle}%`,modalMeaning:"The grants include grant programme names which show which grants were awarded under different programmes.",modalReason:"Grant programme names help users to understand a funder’s different types of funding and priorities, and see how their grants vary across and within these. This information is especially useful when it refers to the communities, sectors, issues or places that are the focus of the programme.<br /><br />360Giving data that includes grant programme names works with the grant programme filtering functions of GrantNav and 360Insights."},{iconName:"label",label:"Includes classifications",value:`${t.hasGrantClassification}%`,modalMeaning:"The grants include classification information to show how the grants have been categorised by the funder. These can be about a wide range of things related to the grant or recipient, and are likely to be specific to each funder.",modalReason:"Classifications provide a clear indication of how the data is categorised by the funder, making it easier to understand the data thematically.<br /><br />For funders who don’t have grant programmes, classifications can be used as an alternative way to show their different types of funding and priorities."}]},{title:"Data updates",description:"Timely updates provide users with an up-to-date picture of grantmaking.\nPublishers make updates at different frequencies; annual, biannual, quarterly, monthly\nor some publish in real-time.\n",infoLabel:"Learn more about data updates",modalDescription:"360Giving data is published by funding organisations on their own websites.<br /><br />These organisations have different grantmaking cycles, data systems and capacity, which means the frequency at which they update their 360Giving data can range from real-time, monthly, quarterly, biannual or annual. This variation in update schedules has an impact on how recently awarded the published grants will be.<br /><br /><i>These statistics show the percentage of organisations sharing 360Giving data (known as publishers) with grants awarded within a certain time-frame</i>.",modalRef:"data_updates",stats:[{iconName:"event_available",label:"Includes grants awarded in the last year",value:`${a.awardedThisYear}%`,modalMeaning:"The organisation has published data with grants awarded in the last 12 months.",modalReason:"Information about grants awarded within the past year are likely to be current and therefore more useful for informing the decision-making of users."},{iconName:"date_range",label:"Includes grants awarded in the last 3 months",value:`${a.awardedLastThreeMonths}%`,modalMeaning:"The organisation has published data with grants awarded in the last 3 months.",modalReason:"Information about recently awarded grants allows users to understand current funding decisions and activity, which allows for better planning and coordination."}],graph:{data:[{x:Object.keys(a.awardYears),y:Object.values(a.awardYears),type:"bar",marker:{color:Te}}],layout:{title:"Number of grants published by award year",yaxis:{title:"Number of grants"},xaxis:{title:"Year",type:"category"}}}}]};var Ge={name:"DashboardPage",components:{DashboardCard:pe,RadioButtons:we,Modal:Me,Spinner:T},props:{publishers:{}},methods:{controlModal(e,t=""){this.modalState=e,this.modalRef=t},setOverviewMode(e){window.location.hash=e,this.overviewMode=e},searchFunction(e=null){this.dataDownloaded=!1;const t=null===e?"":[`?mode=${e}`];fetch(`https://store.data.threesixtygiving.org/api/dashboard//overview${t}`).then((e=>e.json())).then((t=>{this.cards="publishers"===e?Re(t):Ne(t),this.dataDownloaded=!0})).catch((e=>{console.error("Error:",e)}))}},created(){"#publishers"==window.location.hash&&(this.overviewMode="publishers"),"#grants"==window.location.hash&&(this.overviewMode="grants"),this.searchFunction(this.overviewMode)},watch:{overviewMode:function(){this.searchFunction(this.overviewMode)}},data(){return{modalState:!1,modalRef:"",overviewMode:"publishers",cards:[],dataDownloaded:!1}}},Pe=Ge,$e=(0,l.Z)(Pe,ee,te,!1,null,null,null),Le=$e.exports,Oe=function(){var e=this,t=e._self._c;return t("main",{staticClass:"layout__content sidebar-container"},[t("div",{staticClass:"grantnav-search__wrapper"},[t("div",{staticClass:"grantnav-search__sidebar"},[t("h2",{staticClass:"grantnav-search__sidebar--heading"},[e._v("Refine your search")]),t("div",{staticClass:"grantnav-search__sidebar--filters"},[t("SearchPublisherFilter",{key:e.dataDownloaded,attrs:{publisherList:e.unsortedPublishers,filteredPublishers:e.filteredPublishers},on:{updateFilters:function(t){return e.updateFilters(t)}}}),t("br"),t("SearchBadgeFilter",{attrs:{badgesList:e.badges,filteredBadges:e.filteredBadges},on:{updateFilters:function(t){return e.updateFilters(t)}}})],1)]),t("div",{staticClass:"grid grid--one-column"},[t("div",{staticClass:"sidebar-adjacent-content"},[t("SearchSortFilter",{attrs:{sortMode:e.sortMode},on:{sortChange:function(t){return e.sortChange(t)}}}),t("div",{staticClass:"spacer-4"}),e.dataDownloaded?e._e():t("div",[t("Spinner",{key:e.dataDownloaded})],1),e.dataDownloaded?[e._l(e.publisherResults,(function(e){return t("PublisherResult",{key:e.prefix,attrs:{publisher:e}})})),t("div",{staticClass:"spacer-1"})]:e._e()],2)])])])},qe=[],Fe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-publisher-result"},[t("div",{staticClass:"dashboard-publisher-result__head"},[t("div",{staticClass:"dashboard-publisher-result__left-side"},[t("a",{staticClass:"dashboard-publisher-result__title"},[e._v(" "+e._s(e.publisher.name)+" ")])]),t("div",{staticClass:"dashboard-publisher-result__right-side"},[t("div",{staticClass:"dashboard-publisher-result__date"},[e._v(" Last update: "),t("time",{attrs:{datetime:e.publisher.last_published}},[e._v(e._s(e.publisher.last_published))])])])]),e.publisher.aggregate&&e.publisher.quality?[e._l(e.badges.available,(function(e,a){return t("span",{key:a,staticClass:"dashboard-publisher-result__badge"},[t("IconBadge",{attrs:{badge:e}})],1)})),t("hr",{staticClass:"separator-light"}),t("div",[t("h5",[e._v("Total grants published")]),t("div",[t("YearsChart",{attrs:{chart:e.chart}})],1),t("hr",{staticClass:"separator-light"})])]:[t("p",[e._v("There are currently problems accessing all of this publisher's data.")])],t("div",[t("a",{staticClass:"button",attrs:{title:`See more information about ${e.publisher.name}'s data`,href:e.$router.resolve({name:"publisher",params:{id:e.publisher.prefix,publisher:this.publisher}}).href}},[e._v("More about "+e._s(e.publisher.name))])])],2)},Be=[],je=function(){var e=this,t=e._self._c;return t("ul",{staticClass:"years-chart"},e._l(e.chart,(function(a,s){return t("li",{key:`item-${s}`,staticClass:"years-chart__item",style:`--opacity: ${e.calculateOpacity(a.value)};`},[t("div",{staticClass:"years-chart__block",attrs:{"aria-label":a.detail,title:a.detail}},[t("span",[e._v(e._s(a.value_text))])]),t("div",{staticClass:"years-chart__label"},[e._v(e._s(a.label))])])})),0)},Ze=[],Ee={name:"YearsChart",props:{chart:{}},data:function(){return{grantBandings:[0,25,50,100,250,500,1e3,5e3]}},methods:{calculateOpacity(e){const t=this.grantBandings.length;for(let a=0;a<t;a++){if(!e)return 0;if(e<this.grantBandings[a])return a/t}return 1}}},Ae=Ee,Ue=(0,l.Z)(Ae,je,Ze,!1,null,null,null),Ye=Ue.exports,He=function(){var e=this,t=e._self._c;return t("span",{staticClass:"icon-badge"},[t("MaterialIcon",{attrs:{iconName:e.badge.iconName}}),e._v(" "+e._s(e.badge.label)+" ")],1)},ze=[],Ke={name:"IconBadge",components:{MaterialIcon:Y},props:{badge:{}}},We=Ke,Qe=(0,l.Z)(We,He,ze,!1,null,null,null),Ve=Qe.exports;a(7658);const Je=[{qualityMetric:"hasGrantDuration",iconName:"event_note",label:"Includes grant duration"},{qualityMetric:"hasGrantClassification",iconName:"label",label:"Includes classifications"},{qualityMetric:"hasGrantProgrammeTitle",iconName:"format_quote",label:"Includes programme names"},{qualityMetric:"hasRecipientOrgLocations",iconName:"person_pin_circle",label:"Includes recipient location codes"},{qualityMetric:"hasBeneficiaryLocationName",iconName:"edit_location",label:"Includes grant location name"},{qualityMetric:"hasBeneficiaryLocationGeoCode",iconName:"location_on",label:"Includes grant location codes"},{qualityMetric:"has50pcExternalOrgId",iconName:"confirmation_number",label:"Includes over 50% external org IDs"},{qualityMetric:"publishedThisYear",iconName:"event_available",label:"Have published in the last year"},{qualityMetric:"publishedLastThreeMonths",iconName:"event_available",label:"Have published within the last three months"},{qualityMetric:"hasRecipientIndividualsCodelists",iconName:"label",label:"Includes grants to individuals codes"}],Xe=new Date,et=e=>{if(!e.quality)return{available:[],unavailable:[]};let t=[],a=[];for(let r in e.quality)100===e.quality[r]?t.push(r):a.push(r);let s=[],i=[];return Je.forEach((r=>{if("publishedLastThreeMonths"!=r.qualityMetric)if("publishedThisYear"!=r.qualityMetric)t.includes(r.qualityMetric)&&s.push(r),a.includes(r.qualityMetric)&&i.push(r);else{let t=new Date(e.last_published),a=new Date(Xe.getTime()-31536e6);t.getTime()>=a.getTime()?s.push(r):i.push(r)}else{let t=new Date(e.last_published),a=new Date(Xe.getTime()-7884e6);t.getTime()>=a.getTime()?s.push(r):i.push(r)}})),{available:s,unavailable:i}};var tt=a(2077),at=a.n(tt);const st=10,it=(e,t)=>Object.entries(e).filter((e=>e[0]<t)).reduce(((e,t)=>e+t[1]),0),rt=(e,t)=>({label:"Older data",value:it(e,t),value_text:at()(it(e,t)).format("( 0a)"),detail:`${at()(it(e,t)).format("( 0a)")} grants awarded before ${t}`}),nt=(e,t)=>t.map((t=>({label:t,value:e[t],value_text:at()(e[t]).format("( 0a)"),detail:`${at()(e[t]).format("( 0a)")} grants awarded in ${t}`}))),ot=e=>{const t=Array.from({length:st},((e,t)=>t)),a=t.map((e=>(new Date).getFullYear()-e)).sort(),s=Math.min(...a),i=rt(e,s),r=nt(e,a);return[i,...r]};var lt=ot,dt={name:"PublisherResult",components:{YearsChart:Ye,IconBadge:Ve},props:{publisher:{type:Object,required:!0}},data:function(){let e=[],t=[];return this.publisher.aggregate.awardYears&&(e=lt(this.publisher.aggregate.awardYears),t=et(this.publisher)),{chart:e,badges:t}}},ct=dt,ht=(0,l.Z)(ct,Fe,Be,!1,null,null,null),ut=ht.exports,gt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter-list filter-list--with-checkboxes"},[t("details",{staticClass:"filter-list__accordion",attrs:{open:""}},[t("summary",{staticClass:"filter-list__label"},[t("div",[e._v("Publishers "),e.filteredPublishers.length?t("button",{staticClass:"button button--small button--unstyled",on:{click:e.clearFilters}},[t("small",[e._v("(clear)")])]):e._e()]),t("svg",{staticClass:"accordion-toggle-icon",attrs:{width:"18",stroke:"#153634",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("line",{staticClass:"accordion-toggle-icon__horizontal-line",attrs:{x1:"16.4131",y1:"8.65356",x2:"1.09657",y2:"8.65356","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),t("line",{staticClass:"accordion-toggle-icon__vertical-line",attrs:{x1:"8.7561",y1:"0.995239",x2:"8.7561",y2:"16.3118","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])]),t("div",{staticClass:"filter-list__contents-wrapper facet-multiselect"},[t("div",{staticClass:"filter-list__form"},[t("div",{staticClass:"filter-list__form--radios radio"},[t("div",{staticClass:"filter-list__form--radio-item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selection,expression:"selection"}],staticClass:"screen-reader-only",attrs:{type:"radio",id:"publisher-include",name:"publisher-exclude",value:"include",checked:""},domProps:{checked:e._q(e.selection,"include")},on:{click:e.selectionTypeChange,change:function(t){e.selection="include"}}}),t("label",{attrs:{for:"publisher-include"}},[e._v("Include selected")])]),t("div",{staticClass:"filter-list__form--radio-item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selection,expression:"selection"}],staticClass:"screen-reader-only",attrs:{type:"radio",id:"publisher-exclude",name:"publisher-exclude",value:"exclude"},domProps:{checked:e._q(e.selection,"exclude")},on:{click:e.selectionTypeChange,change:function(t){e.selection="exclude"}}}),t("label",{attrs:{for:"publisher-exclude"}},[e._v("Exclude selected")])])]),t("div",{staticClass:"search-box-wrapper padding-left:05 padding-right:05 padding-top:05 padding-bottom:05"},[t("v-select",{attrs:{options:e.filter.options,label:"name",reduce:e=>e.prefix,value:e.filteredPublishers,placeholder:e.filter.label,multiple:""},on:{input:e.publisherChange},scopedSlots:e._u([{key:"option",fn:function(a){return[t("span",{attrs:{title:a.name}},[e._v(" "+e._s(a.name)+" ")])]}}])})],1)])])])])},pt=[],bt={name:"SearchPublisherFilter",props:{publisherList:{},filteredPublishers:{}},data(){return{filter:{id:"publisher",label:"Select publisher(s)",options:this.publisherList},selection:"include"}},methods:{publisherChange(e){const t={...this.$route.query,publishers:e,publisherSelection:this.selection};this.$router.replace({query:t}),this.$emit("updateFilters",{type:"publisher",selection:this.selection})},selectionTypeChange(e){this.selection!==e.target.value&&(this.selection=e.target.value,this.publisherChange(this.$route.query.publishers))},clearFilters(){this.$route.query.publishers.length&&this.publisherChange([])}},created(){this.selection=this.$route.query.publisherSelection||"include"}},ft=bt,mt=(0,l.Z)(ft,gt,pt,!1,null,null,null),vt=mt.exports,_t=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter-list filter-list--with-checkboxes"},[t("details",{staticClass:"filter-list__accordion",attrs:{open:""}},[t("summary",{staticClass:"filter-list__label"},[t("div",[e._v("Data Features "),e.filteredBadges.length?t("button",{staticClass:"button button--small button--unstyled",on:{click:e.clearFilters}},[t("small",[e._v("(clear)")])]):e._e()]),t("svg",{staticClass:"accordion-toggle-icon",attrs:{width:"18",stroke:"#153634",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("line",{staticClass:"accordion-toggle-icon__horizontal-line",attrs:{x1:"16.4131",y1:"8.65356",x2:"1.09657",y2:"8.65356","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),t("line",{staticClass:"accordion-toggle-icon__vertical-line",attrs:{x1:"8.7561",y1:"0.995239",x2:"8.7561",y2:"16.3118","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])]),t("div",{staticClass:"filter-list__contents-wrapper facet-multiselect"},[t("div",{staticClass:"filter-list__form"},[t("div",{staticClass:"filter-list__form--radios radio"},[t("div",{staticClass:"filter-list__form--radio-item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selection,expression:"selection"}],staticClass:"screen-reader-only",attrs:{type:"radio",id:"badge-include",name:"badge-exclude",value:"include",checked:""},domProps:{checked:e._q(e.selection,"include")},on:{click:e.selectionTypeChange,change:function(t){e.selection="include"}}}),t("label",{attrs:{for:"badge-include"}},[e._v("Include selected")])]),t("div",{staticClass:"filter-list__form--radio-item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selection,expression:"selection"}],staticClass:"screen-reader-only",attrs:{type:"radio",id:"badge-exclude",name:"badge-exclude",value:"exclude"},domProps:{checked:e._q(e.selection,"exclude")},on:{click:e.selectionTypeChange,change:function(t){e.selection="exclude"}}}),t("label",{attrs:{for:"badge-exclude"}},[e._v("Exclude selected")])])]),t("div",{staticClass:"search-box-wrapper padding-left:05 padding-right:05 padding-top:05 padding-bottom:05"},[t("v-select",{attrs:{options:e.filter.options,label:"label",reduce:e=>e.qualityMetric,value:e.filteredBadges,placeholder:e.filter.label,multiple:""},on:{input:e.badgeChange},scopedSlots:e._u([{key:"option",fn:function(a){return[t("span",{attrs:{title:a.label}},[e._v(" "+e._s(a.label)+" ")])]}}])})],1)])])])])},wt=[],yt={name:"SearchBadgeFilter",props:{badgesList:{},filteredBadges:{}},data(){return{filter:{id:"feature",label:"Select data feature(s)",options:this.badgesList},selection:"include"}},methods:{badgeChange(e){const t={...this.$route.query,badges:e,badgeSelection:this.selection};this.$router.replace({query:t}),this.$emit("updateFilters")},selectionTypeChange(e){this.selection!==e.target.value&&(this.selection=e.target.value,this.badgeChange(this.$route.query.badges))},clearFilters(){this.$route.query.badges.length&&this.badgeChange([])}},created(){this.selection=this.$route.query.badgeSelection||"include"}},Ct=yt,xt=(0,l.Z)(Ct,_t,wt,!1,null,null,null),kt=xt.exports,Dt=function(){var e=this,t=e._self._c;return t("div",[t("h4",[e._v("Sort:")]),t("div",{staticClass:"sort-filters",staticStyle:{display:"grid","grid-template-columns":"2fr 2fr"}},[t("v-select",{attrs:{options:e.filter.options,clearable:!1,reduce:e=>e.code,value:e.sortMode,placeholder:e.filter.label},on:{input:e.sortChange}})],1)])},Mt=[],Tt={name:"SearchSortFilter",props:{sortMode:{}},data(){return{filter:{id:"sort",label:"Please select a sorting option",activeDefault:!0,options:[{code:"alphabeticallyAsc",label:"Alphabetically (ascending)"},{code:"alphabeticallyDesc",label:"Alphabetically (descending)"}]}}},methods:{sortChange(e){const t={...this.$route.query,sort:e};this.$router.replace({query:t}),this.$emit("sortChange",e)}}},St=Tt,It=(0,l.Z)(St,Dt,Mt,!1,null,null,null),Rt=It.exports,Nt={name:"PublisherPage",components:{PublisherResult:ut,SearchBadgeFilter:kt,SearchPublisherFilter:vt,SearchSortFilter:Rt,Spinner:T},methods:{sortPublisherAlpha(e){e.sort(((e,t)=>{let a=e.name.toLowerCase(),s=t.name.toLowerCase();return 0==a.indexOf("the ")&&(a=a.substr(4)),0==s.indexOf("the ")&&(s=s.substr(4)),a>s?"alphabeticallyDesc"==this.sortMode?-1:1:a<s?"alphabeticallyDesc"==this.sortMode?1:-1:0}))},sortChange(e){this.sortMode=e,this.sortPublisherAlpha(this.publisherResults)},badgeChange(e,t){const a=new Array(e).flat();a.length?this.publisherResults=this.publisherResults.filter((e=>{const s=et(e),i=Object.values(s.available);return"include"===t?a.every((e=>i.some((t=>t.qualityMetric===e)))):a.every((e=>i.every((t=>t.qualityMetric!==e))))})):this.publisherResults=this.publishers},publisherChange(e,t){e.length?this.publisherResults="include"===t?this.publishers.filter((t=>e.includes(t.prefix))):this.publishers.filter((t=>!e.includes(t.prefix))):this.publisherResults=this.publishers},updateFilters(){this.publisherResults=this.publishers;const e=this.$route.query.publishers||[],t=this.$route.query.publisherSelection||"include",a=this.$route.query.badges||[],s=this.$route.query.badgeSelection||"include";this.filteredPublishers=e||null,this.filteredBadges=a||null,e.length&&this.publisherChange(e,t),a.length&&this.badgeChange(a,s)}},data(){return{badges:Je,publishers:[],filteredBadges:[],filteredPublishers:[],publisherResults:[],unsortedPublishers:[],dataDownloaded:!1,sortMode:this.$route.query.sort||"alphabeticallyAsc"}},created(){this.dataDownloaded=!1,this.badgeUpdated=!1,this.publisherUpdated=!1,fetch("https://store.data.threesixtygiving.org/api/dashboard//publishers?format=json").then((e=>e.json())).then((e=>{this.publishers=e,this.unsortedPublishers=[...this.publishers],this.publisherResults=this.publishers,this.sortPublisherAlpha(this.publisherResults),this.dataDownloaded=!0,this.updateFilters({})})).catch((e=>{console.error("Error:",e)}))}},Gt=Nt,Pt=(0,l.Z)(Gt,Oe,qe,!1,null,null,null),$t=Pt.exports,Lt=function(){var e=this,t=e._self._c;return t("div",[e.dataDownloaded?e._e():t("div",[t("Spinner",{key:e.dataDownloaded})],1),e.dataDownloaded?t("div",{staticClass:"dashboard-publisher-result-wrapper"},[t("div",{staticClass:"dashboard-publisher-result__head"},[t("div",{staticClass:"dashboard-publisher-result__left-side"},[t("div",{staticClass:"dashboard-publisher-result__title"},[t("h1",[e._v(e._s(e.publisher.name))])])]),t("div",{staticClass:"dashboard-publisher-result__right-side"},[t("div",{staticClass:"dashboard-publisher-result__date",staticStyle:{"margin-top":"-24px"}},[e._v(" Last update: "),t("time",{attrs:{datetime:e.publisher.last_published}},[e._v(e._s(e.publisher.last_published))])]),e.publisher.logo?t("div",{staticClass:"registry-card__pub-logo",staticStyle:{"margin-top":"40px"}},[t("a",{attrs:{href:e.publisher.website,target:"_blank"}},[t("img",{attrs:{src:e.publisher.logo,alt:e.publisher.name,title:e.publisher.name}})])]):e._e()])]),e.publisher.quality?[t("h3",[e._v("This data includes these features")]),e._l(this.badges.available,(function(e,a){return t("span",{key:a,staticClass:"dashboard-publisher-result__badge"},[t("IconBadge",{attrs:{badge:e}})],1)})),e.badges.unavailable.length?t("a",{attrs:{href:"#",title:"Show not included features"},on:{click:function(t){t.preventDefault(),e.showUnavailableFeatures=!e.showUnavailableFeatures}}},[e._v(e._s(e.badges.unavailable.length)+" features are not included")]):e._e(),e.showUnavailableFeatures?[t("h3",[e._v("This data does not include these features")]),e._l(this.badges.unavailable,(function(e,a){return t("span",{key:a,staticClass:"dashboard-publisher-result__badge"},[t("IconBadge",{attrs:{badge:e}})],1)}))]:e._e()]:e._e(),t("hr",{staticClass:"separator-light"}),t("div",{staticClass:"spacer-1"}),t("div",{staticClass:"dashboard-publisher-result-wrapper__external-buttons align-right"},[t("a",{staticClass:"button",attrs:{href:`https://grantnav.threesixtygiving.org/search?query=*&default_field=*&sort=awardDate+desc&fundingOrganization=${e.getFunders(this.publisher.files).join("&fundingOrganization=")}`,target:"_blank"}},[e._v("See in GrantNav")]),t("a",{staticClass:"button",attrs:{href:`https://insights.threesixtygiving.org/data?funders=${e.getFunders(this.publisher.files).join("&funders=")}`,target:"_blank"}},[e._v("See in Insights")])]),t("div",{staticClass:"spacer-3"}),e.publisher.aggregate?t("div",{staticClass:"dashboard-publisher-result"},[t("h4",{staticClass:"dashboard-publisher-result__title"},[e._v("Total grants published")]),t("p",[e._v("The number of grants published by award year for the past 10 years, with the total grants published that were awarded 11 or more years ago.")]),t("YearsChart",{attrs:{chart:e.chart}})],1):t("div",{staticClass:"dashboard-publisher-result"},[t("h4",[e._v("There are currently problems accessing all of this publisher's data")]),e._m(0)]),t("div",{staticClass:"dashboard-publisher-result"},[t("h4",{staticClass:"dashboard-publisher-result__title"},[e._v("Datasets")]),t("p",[e._v(e._s(e.publisher.files_description))]),t("hr",{staticClass:"separator-light"}),e._l(e.sortedFiles,(function(a,s){return t("FileSummary",{key:`files-${s}`,attrs:{prefix:e.publisher.prefix,file:a}})}))],2)],2):e._e()])},Ot=[function(){var e=this,t=e._self._c;return t("p",[e._v("This may be due file access issues, or changes that may mean the files do not currently conform to the "),t("a",{attrs:{href:"https://www.threesixtygiving.org/standard/"}},[e._v("360Giving data standard")]),e._v(".")])}],qt=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"file-summary grid grid--three-columns"},[t("div",{staticClass:"grid__1"},[t("p",[t("a",{attrs:{href:e.file.distribution.accessURL}},[e._v(e._s(e.file.distribution.title))])]),t("p",[e._v("Grants from "+e._s(e.dateToMonthYear(e.file.aggregate.min_award_date))+" "),e.file.aggregate.max_award_date!==e.file.aggregate.min_award_date?[e._v(" to "+e._s(e.dateToMonthYear(e.file.aggregate.max_award_date))+" ")]:e._e()],2)]),t("div",{staticClass:"grid__1 align-right"},[e.file.aggregate?[t("span",{staticClass:"file-summary__label"},[e._v("Grants")]),t("span",{staticClass:"file-summary__stat"},[e._v(e._s(e.file.aggregate.count.toLocaleString()))])]:e._e()],2),t("div",{staticClass:"grid__1 align-right"},[e.file.aggregate?[t("span",{staticClass:"file-summary__label"},[e._v("Total amount £")]),e._v(" "+e._s(e.file.aggregate.currencies.GBP.total_amount.toLocaleString())+" "),t("span",{staticClass:"file-summary__stat"},[e._v(e._s(e.file.grant_total_shorthand))])]:e._e()],2),t("div",{staticClass:"grid__1"},[t("a",{attrs:{href:e.file.distribution.downloadURL}},[t("span",{staticClass:"tag file-summary__specs"},[e._v(e._s(e.file.datagetter_data.file_type)+" – "+e._s(e._f("numeral")(e.file.datagetter_data.file_size,"0b")))])])]),t("div",{staticClass:"grid__1 align-right"},[t("span",{staticClass:"file-summary__label"},[e._v("Valid data")]),e.file.datagetter_data.valid?t("MaterialIcon",{attrs:{iconName:"check_circle_outline"}}):t("MaterialIcon",{attrs:{iconName:"priority_high"}})],1),t("div",{staticClass:"grid__1 align-right"},[t("span",{staticClass:"file-summary__label"},[e._v("License")]),0===e.file.license.indexOf("Creative Commons")?t("span",{staticClass:"file-summary__native-icon"},[t("img",{staticClass:"license license--cc",staticStyle:{"margin-bottom":"10px"},attrs:{src:a(5674),alt:e.file.license,title:e.file.license}})]):"CCO"===e.file.license?t("span",{staticClass:"file-summary__native-icon license license--cc"},[t("img",{staticClass:"license license--cc",staticStyle:{"margin-bottom":"10px"},attrs:{src:a(557),alt:e.file.license,title:e.file.license}})]):"Open Data Commons Public Domain Dedication and Licence 1.0"===e.file.license?t("span",{staticClass:"file-summary__native-icon"},[t("img",{staticClass:"license license--pddl",staticStyle:{height:"22px",width:"22px","vertical-align":"unset"},attrs:{src:a(9871),alt:e.file.license,title:e.file.license}})]):"Open Government Licence 3.0 (United Kingdom)"===e.file.license?t("span",{staticClass:"file-summary__native-icon"},[t("img",{staticClass:"license license--ogl",staticStyle:{"margin-bottom":"10px"},attrs:{src:a(3615),alt:e.file.license,title:e.file.license}})]):t("span",[e._v(e._s(e.file.license))])])]),t("div",{staticClass:"spacer-3"}),e.file.datagetter_data.downloads?e._e():t("div",[t("p",[e._v('The file "'+e._s(e.file.title)+'" could not be downloaded. The last download attempt was made on the '+e._s(new Date(e.file.datagetter_data.datetime_downloaded).toUTCString().substr(4))+".")])]),t("hr",{staticClass:"separator-light"})])},Ft=[],Bt={name:"FileSummary",components:{MaterialIcon:Y},methods:{dateToMonthYear(e){const t=new Date(e),a=t.toLocaleString("default",{month:"short"}),s=t.getFullYear();return`${a} ${s}`}},props:{file:{},prefix:{}}},jt=Bt,Zt=(0,l.Z)(jt,qt,Ft,!1,null,null,null),Et=Zt.exports,At={name:"PublisherDetail",components:{YearsChart:Ye,FileSummary:Et,IconBadge:Ve,Spinner:T},props:{id:{}},data(){return{publisher:{},dataDownloaded:{},badges:{},chart:{},showUnavailableFeatures:!1}},methods:{searchFunction(e=null){this.dataDownloaded=!1;const t=null===e?"":[`&search=${e}`].join("&");fetch(`https://store.data.threesixtygiving.org/api/dashboard//publisher/${this.id}?format=json${t}`).then((e=>e.json())).then((e=>{this.publisher=e,this.badges=et(e);try{this.chart=lt(this.publisher.aggregate.awardYears)}catch(t){console.warn("No aggregate information for this publisher"),console.warn(this.publisher)}this.dataDownloaded=!0})).catch((e=>{console.error("Error:",e)}))},getFunders(e){let t=[];return e.map((e=>{e.aggregate.funders.map((e=>{t.includes(e)||t.push(e)}))})),t}},computed:{sortedFiles(){return[...this.publisher.files].sort(((e,t)=>new Date(t.aggregate.max_award_date)-new Date(e.aggregate.max_award_date)))}},created(){this.searchFunction()}},Ut=At,Yt=(0,l.Z)(Ut,Lt,Ot,!1,null,null,null),Ht=Yt.exports;s.ZP.use(h.ZP);const zt=[{path:"/",redirect:"/alldata"},{path:"/",component:X,children:[{path:"/alldata",name:"overview",component:Le},{path:"/publishers",name:"publishers",component:$t},{path:"/publisher/:id",name:"publisher",component:Ht,props:!0}]}],Kt=new h.ZP({mode:"history",routes:zt});var Wt=Kt,Qt=a(9339),Vt=a(9938),Jt=a.n(Vt);at().register("locale","en-gb-custom",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"bn",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"£"}}),s.ZP.config.productionTip=!1,s.ZP.use(Qt.Z,{locale:"en-gb-custom"}),s.ZP.component("v-select",Jt()),new s.ZP({render:e=>e(c),router:Wt,components:{App:c}}).$mount("#app")},5813:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/360-giving-logo-white.3a70ef06.svg"},9819:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/360dataqualitydashboard-color.1a6a42d9.svg"},6936:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/github-logo.870b608a.svg"},557:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/Cc-zero.08e298f3.svg"},3615:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/UKOpenGovernmentLicence.b2179fbf.svg"},5674:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/cc.86e55c3e.svg"},9519:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/info.d55f773a.svg"},9871:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/pddl.50858400.svg"},2707:function(e,t,a){e.exports=a.p+"../../static/vue-build/img/twitter-logo.a8c04e81.svg"}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,r){if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],r=e[c][2];for(var o=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(o=!1,r<n&&(n=r));if(o){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,i,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/dashboard/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,r,n=s[0],o=s[1],l=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var c=l(a)}for(t&&t(s);d<n.length;d++)r=n[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},s=self["webpackChunkregistry_vue"]=self["webpackChunkregistry_vue"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(344)}));s=a.O(s)})();
//# sourceMappingURL=app.75a0cc12.js.map